/**
 * Internationalization 2025 - CSS
 * Support for Khmer and English text with proper typography
 */

/* Import design tokens */
@import url('./design-tokens-2025.css');

/* ===== FONT IMPORTS ===== */

/* Khmer Fonts */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Khmer:wght@100;200;300;400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Battambang:wght@100;200;300;400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@100;200;300;400;500;600;700;800;900&display=swap');

/* English Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap');

/* ===== LANGUAGE DETECTION ===== */

[lang="km"] {
  font-family: 'Noto Sans Khmer', 'Battambang', 'Kantumruy Pro', sans-serif;
  line-height: 1.6;
  letter-spacing: 0.02em;
}

[lang="en"] {
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.5;
  letter-spacing: -0.01em;
}

/* ===== TYPOGRAPHY SCALE ===== */

/* Khmer Typography */
[lang="km"] h1,
[lang="km"] .text-4xl {
  font-size: 2.5rem;
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: -0.02em;
}

[lang="km"] h2,
[lang="km"] .text-3xl {
  font-size: 2rem;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.01em;
}

[lang="km"] h3,
[lang="km"] .text-2xl {
  font-size: 1.75rem;
  font-weight: 600;
  line-height: 1.4;
}

[lang="km"] h4,
[lang="km"] .text-xl {
  font-size: 1.5rem;
  font-weight: 500;
  line-height: 1.4;
}

[lang="km"] h5,
[lang="km"] .text-lg {
  font-size: 1.25rem;
  font-weight: 500;
  line-height: 1.5;
}

[lang="km"] h6,
[lang="km"] .text-base {
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.6;
}

[lang="km"] .text-sm {
  font-size: 0.875rem;
  line-height: 1.5;
}

[lang="km"] .text-xs {
  font-size: 0.75rem;
  line-height: 1.4;
}

/* English Typography */
[lang="en"] h1,
[lang="en"] .text-4xl {
  font-size: 2.25rem;
  font-weight: 800;
  line-height: 1.1;
  letter-spacing: -0.025em;
}

[lang="en"] h2,
[lang="en"] .text-3xl {
  font-size: 1.875rem;
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: -0.02em;
}

[lang="en"] h3,
[lang="en"] .text-2xl {
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.015em;
}

[lang="en"] h4,
[lang="en"] .text-xl {
  font-size: 1.25rem;
  font-weight: 600;
  line-height: 1.4;
  letter-spacing: -0.01em;
}

[lang="en"] h5,
[lang="en"] .text-lg {
  font-size: 1.125rem;
  font-weight: 500;
  line-height: 1.5;
}

[lang="en"] h6,
[lang="en"] .text-base {
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.5;
}

[lang="en"] .text-sm {
  font-size: 0.875rem;
  line-height: 1.4;
}

[lang="en"] .text-xs {
  font-size: 0.75rem;
  line-height: 1.3;
}

/* ===== BILINGUAL LAYOUTS ===== */

.bilingual-text {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.bilingual-text .primary {
  font-weight: var(--font-medium);
  color: var(--neutral-900);
}

.bilingual-text .secondary {
  font-size: var(--text-sm);
  color: var(--neutral-600);
  opacity: 0.8;
}

.bilingual-text[lang="km"] .primary {
  font-family: 'Noto Sans Khmer', sans-serif;
}

.bilingual-text[lang="km"] .secondary {
  font-family: 'Inter', sans-serif;
}

.bilingual-text[lang="en"] .primary {
  font-family: 'Inter', sans-serif;
}

.bilingual-text[lang="en"] .secondary {
  font-family: 'Noto Sans Khmer', sans-serif;
}

/* ===== LANGUAGE SWITCHER ===== */

.language-switcher {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
}

.language-switcher .current-lang {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-2) var(--space-3);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--neutral-700);
  cursor: pointer;
  transition: all 0.2s var(--ease-out);
}

.language-switcher .current-lang:hover {
  background: var(--neutral-50);
  border-color: var(--neutral-200);
}

.language-switcher .current-lang .flag {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-sm);
  object-fit: cover;
}

.language-switcher .dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: var(--space-1);
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  min-width: 160px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.2s var(--ease-out);
  z-index: var(--z-dropdown);
}

.language-switcher .dropdown.show {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.language-switcher .dropdown-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3);
  font-size: var(--text-sm);
  color: var(--neutral-700);
  cursor: pointer;
  transition: all 0.2s var(--ease-out);
  border-bottom: 1px solid var(--neutral-100);
}

.language-switcher .dropdown-item:last-child {
  border-bottom: none;
}

.language-switcher .dropdown-item:hover {
  background: var(--neutral-50);
  color: var(--neutral-900);
}

.language-switcher .dropdown-item.active {
  background: var(--primary-50);
  color: var(--primary-700);
}

.language-switcher .dropdown-item .flag {
  width: 18px;
  height: 18px;
  border-radius: var(--radius-sm);
  object-fit: cover;
}

/* ===== RTL SUPPORT ===== */

[dir="rtl"] {
  text-align: right;
}

[dir="rtl"] .flex {
  flex-direction: row-reverse;
}

[dir="rtl"] .text-left {
  text-align: right;
}

[dir="rtl"] .text-right {
  text-align: left;
}

[dir="rtl"] .ml-auto {
  margin-left: 0;
  margin-right: auto;
}

[dir="rtl"] .mr-auto {
  margin-right: 0;
  margin-left: auto;
}

/* ===== TEXT DIRECTION UTILITIES ===== */

.text-direction-auto {
  direction: auto;
}

.text-direction-ltr {
  direction: ltr;
}

.text-direction-rtl {
  direction: rtl;
}

/* ===== LANGUAGE-SPECIFIC COMPONENTS ===== */

/* Khmer-specific adjustments */
[lang="km"] .btn {
  padding: var(--space-3) var(--space-5);
  font-weight: var(--font-medium);
}

[lang="km"] .form-input {
  padding: var(--space-3) var(--space-4);
  font-size: var(--text-base);
}

[lang="km"] .card {
  padding: var(--space-5);
}

[lang="km"] .nav-item {
  padding: var(--space-3) var(--space-4);
}

/* English-specific adjustments */
[lang="en"] .btn {
  padding: var(--space-2) var(--space-4);
  font-weight: var(--font-medium);
}

[lang="en"] .form-input {
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-sm);
}

[lang="en"] .card {
  padding: var(--space-4);
}

[lang="en"] .nav-item {
  padding: var(--space-2) var(--space-3);
}

/* ===== NUMBER FORMATTING ===== */

.number-format-km {
  font-variant-numeric: tabular-nums;
  font-family: 'Noto Sans Khmer', monospace;
}

.number-format-en {
  font-variant-numeric: tabular-nums;
  font-family: 'Inter', monospace;
}

/* ===== DATE FORMATTING ===== */

.date-format-km {
  font-family: 'Noto Sans Khmer', sans-serif;
}

.date-format-en {
  font-family: 'Inter', sans-serif;
}

/* ===== CURRENCY FORMATTING ===== */

.currency-km {
  font-family: 'Noto Sans Khmer', sans-serif;
}

.currency-en {
  font-family: 'Inter', sans-serif;
}

/* ===== RESPONSIVE TYPOGRAPHY ===== */

@media (max-width: 768px) {
  [lang="km"] h1,
  [lang="km"] .text-4xl {
    font-size: 2rem;
  }

  [lang="km"] h2,
  [lang="km"] .text-3xl {
    font-size: 1.75rem;
  }

  [lang="en"] h1,
  [lang="en"] .text-4xl {
    font-size: 1.875rem;
  }

  [lang="en"] h2,
  [lang="en"] .text-3xl {
    font-size: 1.5rem;
  }

  .bilingual-text {
    gap: var(--space-2);
  }

  .language-switcher .dropdown {
    right: auto;
    left: 0;
    min-width: 140px;
  }
}

/* ===== ACCESSIBILITY ===== */

@media (prefers-reduced-motion: reduce) {
  .language-switcher .current-lang,
  .language-switcher .dropdown,
  .language-switcher .dropdown-item {
    transition: none;
  }
}

/* ===== HIGH CONTRAST MODE ===== */

@media (prefers-contrast: high) {
  .language-switcher .current-lang,
  .language-switcher .dropdown {
    border-width: 2px;
  }

  .bilingual-text .secondary {
    opacity: 1;
  }
}

/* ===== PRINT STYLES ===== */

@media print {
  .language-switcher {
    display: none;
  }

  [lang="km"] {
    font-size: 12pt;
    line-height: 1.4;
  }

  [lang="en"] {
    font-size: 11pt;
    line-height: 1.3;
  }
}
