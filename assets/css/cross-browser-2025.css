/**
 * Angkor Compliance Platform - Cross-Browser Compatibility 2025
 * 
 * Cross-browser compatibility fixes and fallbacks
 * for the 2025 design system.
 */

/* ===== BROWSER PREFIXES ===== */

/* Webkit prefixes */
.webkit-only {
    -webkit-appearance: none;
    -webkit-border-radius: 0;
    -webkit-box-shadow: none;
    -webkit-transition: all 0.3s ease;
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000px;
}

/* Mozilla prefixes */
.mozilla-only {
    -moz-appearance: none;
    -moz-border-radius: 0;
    -moz-box-shadow: none;
    -moz-transition: all 0.3s ease;
    -moz-transform: translateZ(0);
    -moz-backface-visibility: hidden;
    -moz-perspective: 1000px;
}

/* Microsoft prefixes */
.microsoft-only {
    -ms-appearance: none;
    -ms-border-radius: 0;
    -ms-box-shadow: none;
    -ms-transition: all 0.3s ease;
    -ms-transform: translateZ(0);
    -ms-backface-visibility: hidden;
    -ms-perspective: 1000px;
}

/* ===== FLEXBOX FALLBACKS ===== */

/* Flexbox with fallbacks */
.flex-fallback {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
}

.flex-fallback > * {
    -webkit-box-flex: 1;
    -webkit-flex: 1;
    -moz-box-flex: 1;
    -ms-flex: 1;
    flex: 1;
}

/* Flexbox direction fallbacks */
.flex-row-fallback {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    -moz-box-orient: horizontal;
    -moz-box-direction: normal;
    -ms-flex-direction: row;
    flex-direction: row;
}

.flex-column-fallback {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    -moz-box-orient: vertical;
    -moz-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
}

/* Flexbox justify content fallbacks */
.justify-center-fallback {
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -moz-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
}

.justify-between-fallback {
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -moz-box-pack: justify;
    -ms-flex-pack: justify;
    justify-content: space-between;
}

.justify-around-fallback {
    -webkit-justify-content: space-around;
    -ms-flex-pack: distribute;
    justify-content: space-around;
}

/* Flexbox align items fallbacks */
.align-center-fallback {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -moz-box-align: center;
    -ms-flex-align: center;
    align-items: center;
}

.align-start-fallback {
    -webkit-box-align: start;
    -webkit-align-items: flex-start;
    -moz-box-align: start;
    -ms-flex-align: start;
    align-items: flex-start;
}

.align-end-fallback {
    -webkit-box-align: end;
    -webkit-align-items: flex-end;
    -moz-box-align: end;
    -ms-flex-align: end;
    align-items: flex-end;
}

/* ===== GRID FALLBACKS ===== */

/* CSS Grid with fallbacks */
.grid-fallback {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.grid-fallback > * {
    -webkit-box-flex: 1;
    -webkit-flex: 1 1 300px;
    -moz-box-flex: 1;
    -ms-flex: 1 1 300px;
    flex: 1 1 300px;
    min-width: 0;
}

/* Grid columns fallback */
.grid-cols-2-fallback {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.grid-cols-2-fallback > * {
    -webkit-box-flex: 1;
    -webkit-flex: 1 1 50%;
    -moz-box-flex: 1;
    -ms-flex: 1 1 50%;
    flex: 1 1 50%;
    min-width: 0;
}

.grid-cols-3-fallback {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.grid-cols-3-fallback > * {
    -webkit-box-flex: 1;
    -webkit-flex: 1 1 33.333%;
    -moz-box-flex: 1;
    -ms-flex: 1 1 33.333%;
    flex: 1 1 33.333%;
    min-width: 0;
}

.grid-cols-4-fallback {
    display: -webkit-box;
    display: -webkit-flex;
    display: -moz-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: wrap;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

.grid-cols-4-fallback > * {
    -webkit-box-flex: 1;
    -webkit-flex: 1 1 25%;
    -moz-box-flex: 1;
    -ms-flex: 1 1 25%;
    flex: 1 1 25%;
    min-width: 0;
}

/* ===== TRANSFORM FALLBACKS ===== */

/* Transform with fallbacks */
.transform-fallback {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
}

.transform-translate-fallback {
    -webkit-transform: translate(0, 0);
    -moz-transform: translate(0, 0);
    -ms-transform: translate(0, 0);
    transform: translate(0, 0);
}

.transform-scale-fallback {
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1);
}

.transform-rotate-fallback {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
}

/* ===== TRANSITION FALLBACKS ===== */

/* Transition with fallbacks */
.transition-fallback {
    -webkit-transition: all 0.3s ease;
    -moz-transition: all 0.3s ease;
    -ms-transition: all 0.3s ease;
    transition: all 0.3s ease;
}

.transition-color-fallback {
    -webkit-transition: color 0.3s ease;
    -moz-transition: color 0.3s ease;
    -ms-transition: color 0.3s ease;
    transition: color 0.3s ease;
}

.transition-background-fallback {
    -webkit-transition: background-color 0.3s ease;
    -moz-transition: background-color 0.3s ease;
    -ms-transition: background-color 0.3s ease;
    transition: background-color 0.3s ease;
}

.transition-transform-fallback {
    -webkit-transition: -webkit-transform 0.3s ease;
    -moz-transition: -moz-transform 0.3s ease;
    -ms-transition: -ms-transform 0.3s ease;
    transition: transform 0.3s ease;
}

/* ===== ANIMATION FALLBACKS ===== */

/* Animation with fallbacks */
.animation-fallback {
    -webkit-animation: none;
    -moz-animation: none;
    -ms-animation: none;
    animation: none;
}

@-webkit-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@-moz-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@-ms-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.animate-fade-in-fallback {
    -webkit-animation: fadeIn 0.3s ease;
    -moz-animation: fadeIn 0.3s ease;
    -ms-animation: fadeIn 0.3s ease;
    animation: fadeIn 0.3s ease;
}

/* ===== BORDER RADIUS FALLBACKS ===== */

/* Border radius with fallbacks */
.border-radius-fallback {
    -webkit-border-radius: 0.375rem;
    -moz-border-radius: 0.375rem;
    border-radius: 0.375rem;
}

.border-radius-sm-fallback {
    -webkit-border-radius: 0.25rem;
    -moz-border-radius: 0.25rem;
    border-radius: 0.25rem;
}

.border-radius-md-fallback {
    -webkit-border-radius: 0.375rem;
    -moz-border-radius: 0.375rem;
    border-radius: 0.375rem;
}

.border-radius-lg-fallback {
    -webkit-border-radius: 0.5rem;
    -moz-border-radius: 0.5rem;
    border-radius: 0.5rem;
}

.border-radius-xl-fallback {
    -webkit-border-radius: 0.75rem;
    -moz-border-radius: 0.75rem;
    border-radius: 0.75rem;
}

.border-radius-full-fallback {
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    border-radius: 50%;
}

/* ===== BOX SHADOW FALLBACKS ===== */

/* Box shadow with fallbacks */
.box-shadow-fallback {
    -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.box-shadow-sm-fallback {
    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.box-shadow-md-fallback {
    -webkit-box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.box-shadow-lg-fallback {
    -webkit-box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
}

.box-shadow-xl-fallback {
    -webkit-box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
    box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
}

/* ===== GRADIENT FALLBACKS ===== */

/* Gradient with fallbacks */
.gradient-fallback {
    background: #f8f9fa;
    background: -webkit-linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    background: -moz-linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    background: -ms-linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.gradient-primary-fallback {
    background: #d4af37;
    background: -webkit-linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
    background: -moz-linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
    background: -ms-linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
    background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%);
}

.gradient-secondary-fallback {
    background: #3b82f6;
    background: -webkit-linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    background: -moz-linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    background: -ms-linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
}

/* ===== FILTER FALLBACKS ===== */

/* Filter with fallbacks */
.filter-fallback {
    -webkit-filter: none;
    -moz-filter: none;
    -ms-filter: none;
    filter: none;
}

.filter-blur-fallback {
    -webkit-filter: blur(0);
    -moz-filter: blur(0);
    -ms-filter: blur(0);
    filter: blur(0);
}

.filter-brightness-fallback {
    -webkit-filter: brightness(1);
    -moz-filter: brightness(1);
    -ms-filter: brightness(1);
    filter: brightness(1);
}

.filter-contrast-fallback {
    -webkit-filter: contrast(1);
    -moz-filter: contrast(1);
    -ms-filter: contrast(1);
    filter: contrast(1);
}

.filter-saturate-fallback {
    -webkit-filter: saturate(1);
    -moz-filter: saturate(1);
    -ms-filter: saturate(1);
    filter: saturate(1);
}

/* ===== BACKDROP FILTER FALLBACKS ===== */

/* Backdrop filter with fallbacks */
.backdrop-filter-fallback {
    background: rgba(255, 255, 255, 0.8);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.backdrop-filter-blur-fallback {
    background: rgba(255, 255, 255, 0.8);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.backdrop-filter-brightness-fallback {
    background: rgba(255, 255, 255, 0.8);
    -webkit-backdrop-filter: brightness(1.2);
    backdrop-filter: brightness(1.2);
}

.backdrop-filter-contrast-fallback {
    background: rgba(255, 255, 255, 0.8);
    -webkit-backdrop-filter: contrast(1.2);
    backdrop-filter: contrast(1.2);
}

/* ===== CLIP PATH FALLBACKS ===== */

/* Clip path with fallbacks */
.clip-path-fallback {
    clip-path: none;
    -webkit-clip-path: none;
}

.clip-path-circle-fallback {
    clip-path: circle(50%);
    -webkit-clip-path: circle(50%);
}

.clip-path-polygon-fallback {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    -webkit-clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}

/* ===== MASK FALLBACKS ===== */

/* Mask with fallbacks */
.mask-fallback {
    -webkit-mask: none;
    mask: none;
}

.mask-gradient-fallback {
    -webkit-mask: linear-gradient(45deg, transparent 0%, black 50%, transparent 100%);
    mask: linear-gradient(45deg, transparent 0%, black 50%, transparent 100%);
}

/* ===== SCROLL BEHAVIOR FALLBACKS ===== */

/* Scroll behavior with fallbacks */
.scroll-behavior-fallback {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

.scroll-behavior-auto-fallback {
    -webkit-overflow-scrolling: auto;
    scroll-behavior: auto;
}

.scroll-behavior-smooth-fallback {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* ===== USER SELECT FALLBACKS ===== */

/* User select with fallbacks */
.user-select-fallback {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.user-select-text-fallback {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}

.user-select-all-fallback {
    -webkit-user-select: all;
    -moz-user-select: all;
    -ms-user-select: all;
    user-select: all;
}

/* ===== TOUCH ACTION FALLBACKS ===== */

/* Touch action with fallbacks */
.touch-action-fallback {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.touch-action-auto-fallback {
    -webkit-touch-callout: auto;
    -webkit-tap-highlight-color: auto;
    touch-action: auto;
}

.touch-action-none-fallback {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
}

.touch-action-pan-x-fallback {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: pan-x;
}

.touch-action-pan-y-fallback {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: pan-y;
}

.touch-action-manipulation-fallback {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

/* ===== BROWSER-SPECIFIC FIXES ===== */

/* Internet Explorer fixes */
.ie-fix {
    /* IE-specific styles */
    zoom: 1;
    *zoom: 1;
}

.ie-fix::before,
.ie-fix::after {
    content: "";
    display: table;
}

.ie-fix::after {
    clear: both;
}

/* Safari fixes */
.safari-fix {
    -webkit-appearance: none;
    -webkit-border-radius: 0;
}

/* Firefox fixes */
.firefox-fix {
    -moz-appearance: none;
    -moz-border-radius: 0;
}

/* Chrome fixes */
.chrome-fix {
    -webkit-appearance: none;
    -webkit-border-radius: 0;
}

/* Edge fixes */
.edge-fix {
    -ms-appearance: none;
    -ms-border-radius: 0;
}

/* ===== RESPONSIVE FALLBACKS ===== */

/* Responsive with fallbacks */
.responsive-fallback {
    width: 100%;
    max-width: 100%;
    height: auto;
}

.responsive-img-fallback {
    width: 100%;
    max-width: 100%;
    height: auto;
    display: block;
}

.responsive-video-fallback {
    width: 100%;
    max-width: 100%;
    height: auto;
    display: block;
}

/* ===== PRINT FALLBACKS ===== */

/* Print with fallbacks */
@media print {
    .print-fallback {
        -webkit-print-color-adjust: exact;
        color-adjust: exact;
        print-color-adjust: exact;
    }
    
    .print-fallback * {
        -webkit-print-color-adjust: exact;
        color-adjust: exact;
        print-color-adjust: exact;
    }
}

/* ===== ACCESSIBILITY FALLBACKS ===== */

/* Accessibility with fallbacks */
.accessibility-fallback {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.accessibility-focus-fallback {
    outline: 2px solid #d4af37;
    outline-offset: 2px;
}

.accessibility-focus-fallback:focus {
    outline: 2px solid #d4af37;
    outline-offset: 2px;
}

/* ===== PERFORMANCE FALLBACKS ===== */

/* Performance with fallbacks */
.performance-fallback {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000px;
    -moz-perspective: 1000px;
    -ms-perspective: 1000px;
    perspective: 1000px;
}

.performance-fallback * {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    backface-visibility: hidden;
}

/* ===== DARK MODE FALLBACKS ===== */

/* Dark mode with fallbacks */
@media (prefers-color-scheme: dark) {
    .dark-mode-fallback {
        background: #1a1a1a;
        color: #ffffff;
    }
    
    .dark-mode-fallback * {
        background: #1a1a1a;
        color: #ffffff;
    }
}

.dark-mode-fallback {
    background: #1a1a1a;
    color: #ffffff;
}

.dark-mode-fallback * {
    background: #1a1a1a;
    color: #ffffff;
}

/* ===== HIGH CONTRAST FALLBACKS ===== */

/* High contrast with fallbacks */
@media (prefers-contrast: high) {
    .high-contrast-fallback {
        background: #000000;
        color: #ffffff;
        border: 2px solid #ffffff;
    }
    
    .high-contrast-fallback * {
        background: #000000;
        color: #ffffff;
        border: 2px solid #ffffff;
    }
}

.high-contrast-fallback {
    background: #000000;
    color: #ffffff;
    border: 2px solid #ffffff;
}

.high-contrast-fallback * {
    background: #000000;
    color: #ffffff;
    border: 2px solid #ffffff;
}

/* ===== REDUCED MOTION FALLBACKS ===== */

/* Reduced motion with fallbacks */
@media (prefers-reduced-motion: reduce) {
    .reduced-motion-fallback {
        -webkit-animation: none;
        -moz-animation: none;
        -ms-animation: none;
        animation: none;
        -webkit-transition: none;
        -moz-transition: none;
        -ms-transition: none;
        transition: none;
    }
    
    .reduced-motion-fallback * {
        -webkit-animation: none;
        -moz-animation: none;
        -ms-animation: none;
        animation: none;
        -webkit-transition: none;
        -moz-transition: none;
        -ms-transition: none;
        transition: none;
    }
}

.reduced-motion-fallback {
    -webkit-animation: none;
    -moz-animation: none;
    -ms-animation: none;
    animation: none;
    -webkit-transition: none;
    -moz-transition: none;
    -ms-transition: none;
    transition: none;
}

.reduced-motion-fallback * {
    -webkit-animation: none;
    -moz-animation: none;
    -ms-animation: none;
    animation: none;
    -webkit-transition: none;
    -moz-transition: none;
    -ms-transition: none;
    transition: none;
}
