<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Staff Settings - Angkor Compliance</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/notification-system.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="page-header">
            <div class="header-content">
                <div class="header-left">
                    <h1>HR Staff Settings</h1>
                    <p>Manage workforce compliance and HR-specific configurations</p>
                </div>
                <div class="header-right">
                    <div class="user-menu">
                        <span id="userName">Loading...</span>
                        <button onclick="logout()" class="btn btn-outline">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="settings-container">
                <!-- Settings Navigation -->
                <nav class="settings-nav">
                    <button class="nav-item active" onclick="showTab('workforce')">
                        <i data-lucide="users"></i>
                        Workforce Management
                    </button>
                    <button class="nav-item" onclick="showTab('compliance')">
                        <i data-lucide="shield-check"></i>
                        Compliance Standards
                    </button>
                    <button class="nav-item" onclick="showTab('grievances')">
                        <i data-lucide="message-square"></i>
                        Grievance Management
                    </button>
                    <button class="nav-item" onclick="showTab('training')">
                        <i data-lucide="graduation-cap"></i>
                        Training & Development
                    </button>
                    <button class="nav-item" onclick="showTab('reports')">
                        <i data-lucide="bar-chart-3"></i>
                        HR Reports
                    </button>
                    <button class="nav-item" onclick="showTab('notifications')">
                        <i data-lucide="bell"></i>
                        Notifications
                    </button>
                </nav>

                <!-- Settings Content -->
                <div class="settings-content">
                    <!-- Workforce Management Tab -->
                    <div id="workforce" class="tab-content active">
                        <div class="tab-header">
                            <h2>Workforce Management</h2>
                            <p>Manage employee data and workforce compliance</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>Employee Demographics</h3>
                                <form id="demographicsForm">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="totalEmployees">Total Employees</label>
                                            <input type="number" id="totalEmployees" name="totalEmployees" min="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="fullTimeEmployees">Full-time Employees</label>
                                            <input type="number" id="fullTimeEmployees" name="fullTimeEmployees" min="0">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="partTimeEmployees">Part-time Employees</label>
                                            <input type="number" id="partTimeEmployees" name="partTimeEmployees" min="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="contractEmployees">Contract Employees</label>
                                            <input type="number" id="contractEmployees" name="contractEmployees" min="0">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="femaleEmployees">Female Employees</label>
                                            <input type="number" id="femaleEmployees" name="femaleEmployees" min="0">
                                        </div>
                                        <div class="form-group">
                                            <label for="maleEmployees">Male Employees</label>
                                            <input type="number" id="maleEmployees" name="maleEmployees" min="0">
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>

                            <div class="setting-card">
                                <h3>Working Conditions</h3>
                                <form id="workingConditionsForm">
                                    <div class="form-group">
                                        <label for="standardWorkHours">Standard Work Hours</label>
                                        <input type="number" id="standardWorkHours" name="standardWorkHours" min="0" max="24" value="8">
                                    </div>
                                    <div class="form-group">
                                        <label for="overtimePolicy">Overtime Policy</label>
                                        <select id="overtimePolicy" name="overtimePolicy">
                                            <option value="standard">Standard (1.5x after 8 hours)</option>
                                            <option value="flexible">Flexible Working Hours</option>
                                            <option value="compressed">Compressed Work Week</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="breakTime">Break Time (minutes)</label>
                                        <input type="number" id="breakTime" name="breakTime" min="0" value="30">
                                    </div>
                                    <div class="form-group">
                                        <label for="leavePolicy">Leave Policy</label>
                                        <textarea id="leavePolicy" name="leavePolicy" rows="3" placeholder="Describe leave policy"></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Compliance Standards Tab -->
                    <div id="compliance" class="tab-content">
                        <div class="tab-header">
                            <h2>Compliance Standards</h2>
                            <p>Configure HR-specific compliance requirements</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>Labor Standards</h3>
                                <form id="laborStandardsForm">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="minimumWage" value="true">
                                            Minimum Wage Compliance
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="overtimePay" value="true">
                                            Overtime Pay Compliance
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="childLabor" value="true">
                                            Child Labor Prevention
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="forcedLabor" value="true">
                                            Forced Labor Prevention
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="discrimination" value="true">
                                            Anti-Discrimination Policy
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="harassment" value="true">
                                            Anti-Harassment Policy
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>

                            <div class="setting-card">
                                <h3>Health & Safety</h3>
                                <form id="healthSafetyForm">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="safetyTraining" value="true">
                                            Safety Training Required
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="ppe" value="true">
                                            Personal Protective Equipment
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="emergencyProcedures" value="true">
                                            Emergency Procedures
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="healthChecks" value="true">
                                            Regular Health Checks
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="safetyOfficer">Safety Officer</label>
                                        <input type="text" id="safetyOfficer" name="safetyOfficer" placeholder="Name of safety officer">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Grievance Management Tab -->
                    <div id="grievances" class="tab-content">
                        <div class="tab-header">
                            <h2>Grievance Management</h2>
                            <p>Configure grievance handling and resolution processes</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>Grievance Categories</h3>
                                <div class="category-list" id="grievanceCategories">
                                    <!-- Categories will be loaded here -->
                                </div>
                                <button onclick="openAddGrievanceCategoryModal()" class="btn btn-primary">Add Category</button>
                            </div>

                            <div class="setting-card">
                                <h3>Resolution Process</h3>
                                <form id="resolutionProcessForm">
                                    <div class="form-group">
                                        <label for="responseTime">Response Time (hours)</label>
                                        <input type="number" id="responseTime" name="responseTime" min="1" value="24">
                                    </div>
                                    <div class="form-group">
                                        <label for="resolutionTime">Resolution Time (days)</label>
                                        <input type="number" id="resolutionTime" name="resolutionTime" min="1" value="7">
                                    </div>
                                    <div class="form-group">
                                        <label for="escalationLevels">Escalation Levels</label>
                                        <select id="escalationLevels" name="escalationLevels">
                                            <option value="2">2 Levels</option>
                                            <option value="3" selected>3 Levels</option>
                                            <option value="4">4 Levels</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="anonymousReporting">Allow Anonymous Reporting</label>
                                        <select id="anonymousReporting" name="anonymousReporting">
                                            <option value="true" selected>Yes</option>
                                            <option value="false">No</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Training & Development Tab -->
                    <div id="training" class="tab-content">
                        <div class="tab-header">
                            <h2>Training & Development</h2>
                            <p>Manage employee training programs and development</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>Training Programs</h3>
                                <div class="training-list" id="trainingPrograms">
                                    <!-- Training programs will be loaded here -->
                                </div>
                                <button onclick="openAddTrainingModal()" class="btn btn-primary">Add Training Program</button>
                            </div>

                            <div class="setting-card">
                                <h3>Training Requirements</h3>
                                <form id="trainingRequirementsForm">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="orientationTraining" value="true">
                                            New Employee Orientation
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="safetyTraining" value="true">
                                            Annual Safety Training
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="complianceTraining" value="true">
                                            Compliance Training
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="skillDevelopment" value="true">
                                            Skill Development Programs
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="trainingFrequency">Training Frequency</label>
                                        <select id="trainingFrequency" name="trainingFrequency">
                                            <option value="monthly">Monthly</option>
                                            <option value="quarterly" selected>Quarterly</option>
                                            <option value="annually">Annually</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- HR Reports Tab -->
                    <div id="reports" class="tab-content">
                        <div class="tab-header">
                            <h2>HR Reports</h2>
                            <p>Generate HR-specific reports and analytics</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>Workforce Analytics</h3>
                                <div class="chart-container">
                                    <canvas id="workforceAnalyticsChart"></canvas>
                                </div>
                                <div class="chart-actions">
                                    <button onclick="generateWorkforceReport()" class="btn btn-primary">Generate Report</button>
                                    <button onclick="exportWorkforceData()" class="btn btn-outline">Export Data</button>
                                </div>
                            </div>

                            <div class="setting-card">
                                <h3>Compliance Metrics</h3>
                                <div class="metrics-grid">
                                    <div class="metric-card">
                                        <div class="metric-value" id="trainingCompletion">0%</div>
                                        <div class="metric-label">Training Completion</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value" id="grievanceResolution">0%</div>
                                        <div class="metric-label">Grievance Resolution</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value" id="safetyCompliance">0%</div>
                                        <div class="metric-label">Safety Compliance</div>
                                    </div>
                                    <div class="metric-card">
                                        <div class="metric-value" id="laborCompliance">0%</div>
                                        <div class="metric-label">Labor Compliance</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notifications Tab -->
                    <div id="notifications" class="tab-content">
                        <div class="tab-header">
                            <h2>Notification Settings</h2>
                            <p>Configure HR-specific notification preferences</p>
                        </div>
                        
                        <div class="settings-grid">
                            <div class="setting-card">
                                <h3>HR Notifications</h3>
                                <form id="hrNotificationsForm">
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="newGrievances" value="true">
                                            New Grievance Alerts
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="trainingReminders" value="true">
                                            Training Reminders
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="complianceDeadlines" value="true">
                                            Compliance Deadlines
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" name="safetyIncidents" value="true">
                                            Safety Incident Reports
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="hrNotificationEmail">HR Notification Email</label>
                                        <input type="email" id="hrNotificationEmail" name="hrNotificationEmail">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>

                            <div class="setting-card">
                                <h3>Alert Frequency</h3>
                                <form id="alertFrequencyForm">
                                    <div class="form-group">
                                        <label for="grievanceAlerts">Grievance Alerts</label>
                                        <select id="grievanceAlerts" name="grievanceAlerts">
                                            <option value="immediate">Immediate</option>
                                            <option value="hourly">Hourly</option>
                                            <option value="daily" selected>Daily</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="trainingAlerts">Training Alerts</label>
                                        <select id="trainingAlerts" name="trainingAlerts">
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly" selected>Monthly</option>
                                            <option value="quarterly">Quarterly</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="complianceAlerts">Compliance Alerts</label>
                                        <select id="complianceAlerts" name="complianceAlerts">
                                            <option value="immediate">Immediate</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Grievance Category Modal -->
    <div id="addGrievanceCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Grievance Category</h3>
                <button onclick="closeModal('addGrievanceCategoryModal')" class="modal-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addGrievanceCategoryForm">
                    <div class="form-group">
                        <label for="grievanceCategoryName">Category Name</label>
                        <input type="text" id="grievanceCategoryName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="grievanceCategoryDescription">Description</label>
                        <textarea id="grievanceCategoryDescription" name="description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="grievanceCategoryPriority">Priority Level</label>
                        <select id="grievanceCategoryPriority" name="priority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('addGrievanceCategoryModal')" class="btn btn-outline">Cancel</button>
                <button onclick="saveNewGrievanceCategory()" class="btn btn-primary">Add Category</button>
            </div>
        </div>
    </div>

    <!-- Add Training Program Modal -->
    <div id="addTrainingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Training Program</h3>
                <button onclick="closeModal('addTrainingModal')" class="modal-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addTrainingForm">
                    <div class="form-group">
                        <label for="trainingName">Training Name</label>
                        <input type="text" id="trainingName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="trainingDescription">Description</label>
                        <textarea id="trainingDescription" name="description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="trainingDuration">Duration (hours)</label>
                        <input type="number" id="trainingDuration" name="duration" min="0.5" step="0.5" value="2">
                    </div>
                    <div class="form-group">
                        <label for="trainingFrequency">Frequency</label>
                        <select id="trainingFrequency" name="frequency">
                            <option value="once">Once</option>
                            <option value="annually" selected>Annually</option>
                            <option value="biannually">Biannually</option>
                            <option value="quarterly">Quarterly</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="trainingRequired">Required for</label>
                        <select id="trainingRequired" name="requiredFor">
                            <option value="all">All Employees</option>
                            <option value="new">New Employees</option>
                            <option value="supervisors">Supervisors</option>
                            <option value="specific">Specific Roles</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('addTrainingModal')" class="btn btn-outline">Cancel</button>
                <button onclick="saveNewTraining()" class="btn btn-primary">Add Training</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="firebase-config.js"></script>
    <script src="assets/js/notification-system.js"></script>
    <script src="assets/js/advanced-analytics.js"></script>
    <script src="assets/js/hr-staff-settings.js"></script>
</body>
</html>
