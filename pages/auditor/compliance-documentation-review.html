<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance Documentation Review - Angkor Compliance Platform</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/auditor.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="role-auditor">
    <div class="container-fluid">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-file-alt"></i> Compliance Documentation Review</h1>
                    <p>Review and assess compliance documentation</p>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <span class="user-name">Auditor</span>
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="row">
                <!-- Left Panel - Document Queue -->
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-list"></i> Document Queue</h3>
                            <div class="card-actions">
                                <button class="btn btn-outline-primary btn-sm" id="refreshQueue">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Filter Controls -->
                            <div class="filter-controls">
                                <div class="form-group">
                                    <label for="statusFilter">Status</label>
                                    <select id="statusFilter" class="form-control">
                                        <option value="">All Status</option>
                                        <option value="pending">Pending Review</option>
                                        <option value="in_review">In Review</option>
                                        <option value="approved">Approved</option>
                                        <option value="rejected">Rejected</option>
                                        <option value="requires_revision">Requires Revision</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="categoryFilter">Category</label>
                                    <select id="categoryFilter" class="form-control">
                                        <option value="">All Categories</option>
                                        <option value="policies">Policies</option>
                                        <option value="procedures">Procedures</option>
                                        <option value="training">Training Materials</option>
                                        <option value="records">Records</option>
                                        <option value="reports">Reports</option>
                                        <option value="certificates">Certificates</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="priorityFilter">Priority</label>
                                    <select id="priorityFilter" class="form-control">
                                        <option value="">All Priorities</option>
                                        <option value="high">High</option>
                                        <option value="medium">Medium</option>
                                        <option value="low">Low</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Document List -->
                            <div id="documentQueue" class="document-queue">
                                <!-- Documents will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Document Review -->
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-search"></i> Document Review</h3>
                            <div class="card-actions">
                                <button class="btn btn-secondary" id="saveReview">
                                    <i class="fas fa-save"></i> Save Review
                                </button>
                                <button class="btn btn-success" id="approveDocument">
                                    <i class="fas fa-check"></i> Approve
                                </button>
                                <button class="btn btn-danger" id="rejectDocument">
                                    <i class="fas fa-times"></i> Reject
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="documentReviewForm">
                                <!-- Document Information -->
                                <div class="document-info">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Document Title:</label>
                                                <span id="docTitle">-</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Document Type:</label>
                                                <span id="docType">-</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Submitted By:</label>
                                                <span id="docSubmitter">-</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Submission Date:</label>
                                                <span id="docSubmissionDate">-</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Priority:</label>
                                                <span id="docPriority">-</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="info-item">
                                                <label>Status:</label>
                                                <span id="docStatus">-</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Document Preview -->
                                <div class="document-preview">
                                    <h4><i class="fas fa-eye"></i> Document Preview</h4>
                                    <div id="documentPreview" class="preview-container">
                                        <div class="preview-placeholder">
                                            <i class="fas fa-file-pdf"></i>
                                            <p>Select a document to preview</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Review Form -->
                                <div class="review-form">
                                    <h4><i class="fas fa-clipboard-check"></i> Review Assessment</h4>
                                    <form id="reviewForm">
                                        <!-- Compliance Assessment -->
                                        <div class="form-section">
                                            <h5>Compliance Assessment</h5>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="complianceScore">Compliance Score *</label>
                                                        <select id="complianceScore" class="form-control" required>
                                                            <option value="">Select Score</option>
                                                            <option value="excellent">Excellent (90-100%)</option>
                                                            <option value="good">Good (80-89%)</option>
                                                            <option value="satisfactory">Satisfactory (70-79%)</option>
                                                            <option value="needs_improvement">Needs Improvement (60-69%)</option>
                                                            <option value="unsatisfactory">Unsatisfactory (<60%)</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="complianceStatus">Compliance Status *</label>
                                                        <select id="complianceStatus" class="form-control" required>
                                                            <option value="">Select Status</option>
                                                            <option value="compliant">Compliant</option>
                                                            <option value="non_compliant">Non-Compliant</option>
                                                            <option value="partially_compliant">Partially Compliant</option>
                                                            <option value="requires_verification">Requires Verification</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Quality Assessment -->
                                        <div class="form-section">
                                            <h5>Quality Assessment</h5>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label for="clarityScore">Clarity</label>
                                                        <select id="clarityScore" class="form-control">
                                                            <option value="">Select Score</option>
                                                            <option value="5">5 - Excellent</option>
                                                            <option value="4">4 - Good</option>
                                                            <option value="3">3 - Satisfactory</option>
                                                            <option value="2">2 - Needs Improvement</option>
                                                            <option value="1">1 - Poor</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label for="completenessScore">Completeness</label>
                                                        <select id="completenessScore" class="form-control">
                                                            <option value="">Select Score</option>
                                                            <option value="5">5 - Complete</option>
                                                            <option value="4">4 - Mostly Complete</option>
                                                            <option value="3">3 - Partially Complete</option>
                                                            <option value="2">2 - Incomplete</option>
                                                            <option value="1">1 - Missing</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label for="accuracyScore">Accuracy</label>
                                                        <select id="accuracyScore" class="form-control">
                                                            <option value="">Select Score</option>
                                                            <option value="5">5 - Highly Accurate</option>
                                                            <option value="4">4 - Accurate</option>
                                                            <option value="3">3 - Mostly Accurate</option>
                                                            <option value="2">2 - Some Errors</option>
                                                            <option value="1">1 - Many Errors</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Review Comments -->
                                        <div class="form-section">
                                            <h5>Review Comments</h5>
                                            <div class="form-group">
                                                <label for="strengths">Strengths</label>
                                                <textarea id="strengths" class="form-control" rows="3" placeholder="Document the strengths of this document..."></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="weaknesses">Areas for Improvement</label>
                                                <textarea id="weaknesses" class="form-control" rows="3" placeholder="Document areas that need improvement..."></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="recommendations">Recommendations</label>
                                                <textarea id="recommendations" class="form-control" rows="3" placeholder="Provide specific recommendations for improvement..."></textarea>
                                            </div>
                                            <div class="form-group">
                                                <label for="overallAssessment">Overall Assessment *</label>
                                                <textarea id="overallAssessment" class="form-control" rows="4" placeholder="Provide an overall assessment of the document..." required></textarea>
                                            </div>
                                        </div>

                                        <!-- Action Required -->
                                        <div class="form-section">
                                            <h5>Action Required</h5>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="actionRequired">Action Required *</label>
                                                        <select id="actionRequired" class="form-control" required>
                                                            <option value="">Select Action</option>
                                                            <option value="approve">Approve as-is</option>
                                                            <option value="approve_with_minor_changes">Approve with minor changes</option>
                                                            <option value="require_revision">Require revision</option>
                                                            <option value="reject">Reject</option>
                                                            <option value="escalate">Escalate for review</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="deadline">Revision Deadline</label>
                                                        <input type="date" id="deadline" class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="actionNotes">Action Notes</label>
                                                <textarea id="actionNotes" class="form-control" rows="2" placeholder="Additional notes about the required action..."></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    <script src="../assets/js/firebase-config.js"></script>
    <script src="../assets/js/enhanced-rbac-system.js"></script>
    <script src="../assets/js/auditor/compliance-documentation-review.js"></script>
</body>
</html>
