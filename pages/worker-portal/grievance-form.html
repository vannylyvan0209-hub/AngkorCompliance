<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="../../assets/css/main-2025.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Grievance - Worker App</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    

    <style>
        .grievance-form-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .form-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .form-header h1 {
            margin: 0 0 10px 0;
            font-size: 2.2rem;
            font-weight: 700;
        }

        .form-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .form-content {
            padding: 40px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            background: white;
            cursor: pointer;
        }

        .form-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .form-checkbox input[type="checkbox"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .form-checkbox label {
            font-weight: 500;
            color: #333;
            cursor: pointer;
        }

        .form-radio {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .form-radio input[type="radio"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .form-radio label {
            font-weight: 500;
            color: #333;
            cursor: pointer;
        }

        .grievance-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .category-card {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .category-card.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .category-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #667eea;
        }

        .category-card.selected .category-icon {
            color: white;
        }

        .category-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .category-description {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .severity-levels {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .severity-level {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .severity-level:hover {
            border-color: #667eea;
        }

        .severity-level.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .severity-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .severity-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .severity-description {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .file-upload-area {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            background: #f0f4ff;
            border-color: #5a6fd8;
        }

        .file-upload-area.dragover {
            background: #e8f4fd;
            border-color: #28a745;
        }

        .upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 20px;
        }

        .upload-text {
            color: #666;
            margin-bottom: 15px;
        }

        .upload-btn {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .uploaded-files {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .file-info {
            display: flex;
            align-items: center;
        }

        .file-icon {
            font-size: 1.5rem;
            color: #667eea;
            margin-right: 15px;
        }

        .file-details h4 {
            margin: 0 0 5px 0;
            font-size: 1rem;
        }

        .file-details p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .remove-file {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .remove-file:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .form-actions {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: inline-block;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .anonymity-notice {
            background: rgba(102, 126, 234, 0.1);
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .anonymity-notice h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .anonymity-notice p {
            color: #666;
            margin: 0;
            line-height: 1.6;
        }

        .progress-bar {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .language-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .language-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 0 15px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e1e5e9;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 10px;
        }

        .step.active .step-number {
            background: #667eea;
            color: white;
        }

        .step.completed .step-number {
            background: #28a745;
            color: white;
        }

        .step-title {
            font-weight: 600;
            color: #333;
        }

        .step.active .step-title {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 20px;
            }
            
            .grievance-categories {
                grid-template-columns: 1fr;
            }
            
            .severity-levels {
                flex-direction: column;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .step-indicator {
                flex-direction: column;
                align-items: center;
            }
            
            .step {
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div id="sidebarContainer"></div>
    <div class="language-toggle">
        <button class="language-btn" onclick="toggleLanguage()">
            <i class="fas fa-globe"></i>
            <span id="lang-text">English</span>
        </button>
    </div>

    <a href="worker-app.html" class="back-btn">
        <i class="fas fa-arrow-left"></i>
        <span id="back-text">Back</span>
    </a>

    <div class="grievance-form-container">
        <div class="form-container">
            <div class="form-header">
                <h1 id="form-title">Submit Grievance</h1>
                <p id="form-subtitle">Your report is completely anonymous and confidential</p>
            </div>

            <div class="form-content">
                <div class="anonymity-notice">
                    <h3 id="anonymity-title">🛡️ Your Privacy & Safety</h3>
                    <p id="anonymity-description">
                        All grievances are submitted anonymously. Your identity is protected, and retaliation is strictly prohibited by law. 
                        This system ensures your safety while reporting workplace issues.
                    </p>
                </div>

                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-title" id="step1-title">Category</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-title" id="step2-title">Details</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-title" id="step3-title">Evidence</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-title" id="step4-title">Review</div>
                    </div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <!-- Step 1: Category Selection -->
                <div class="form-step active" id="step1">
                    <div class="section-title" id="category-title">Select Grievance Category</div>
                    <div class="grievance-categories">
                        <div class="category-card" data-category="harassment">
                            <div class="category-icon">
                                <i class="fas fa-user-shield"></i>
                            </div>
                            <div class="category-title" id="harassment-title">Harassment</div>
                            <div class="category-description" id="harassment-desc">Bullying, discrimination, sexual harassment</div>
                        </div>
                        <div class="category-card" data-category="safety">
                            <div class="category-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="category-title" id="safety-title">Safety Issues</div>
                            <div class="category-description" id="safety-desc">Hazards, accidents, unsafe conditions</div>
                        </div>
                        <div class="category-card" data-category="wages">
                            <div class="category-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="category-title" id="wages-title">Wage Issues</div>
                            <div class="category-description" id="wages-desc">Unpaid wages, overtime, deductions</div>
                        </div>
                        <div class="category-card" data-category="working-conditions">
                            <div class="category-icon">
                                <i class="fas fa-industry"></i>
                            </div>
                            <div class="category-title" id="conditions-title">Working Conditions</div>
                            <div class="category-description" id="conditions-desc">Poor ventilation, excessive hours, breaks</div>
                        </div>
                        <div class="category-card" data-category="management">
                            <div class="category-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="category-title" id="management-title">Management Issues</div>
                            <div class="category-description" id="management-desc">Unfair treatment, favoritism, abuse</div>
                        </div>
                        <div class="category-card" data-category="other">
                            <div class="category-icon">
                                <i class="fas fa-ellipsis-h"></i>
                            </div>
                            <div class="category-title" id="other-title">Other</div>
                            <div class="category-description" id="other-desc">Other workplace issues not listed above</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="severity-label">Severity Level</label>
                        <div class="severity-levels">
                            <div class="severity-level" data-severity="low">
                                <div class="severity-icon">🟢</div>
                                <div class="severity-title" id="low-title">Low</div>
                                <div class="severity-description" id="low-desc">Minor issue, no immediate risk</div>
                            </div>
                            <div class="severity-level" data-severity="medium">
                                <div class="severity-icon">🟡</div>
                                <div class="severity-title" id="medium-title">Medium</div>
                                <div class="severity-description" id="medium-desc">Moderate concern, needs attention</div>
                            </div>
                            <div class="severity-level" data-severity="high">
                                <div class="severity-icon">🟠</div>
                                <div class="severity-title" id="high-title">High</div>
                                <div class="severity-description" id="high-desc">Serious issue, urgent attention needed</div>
                            </div>
                            <div class="severity-level" data-severity="critical">
                                <div class="severity-icon">🔴</div>
                                <div class="severity-title" id="critical-title">Critical</div>
                                <div class="severity-description" id="critical-desc">Immediate danger, emergency response</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary font-medium" onclick="previousStep()" style="display: none;" id="prev-btn">
                            <i class="fas fa-arrow-left"></i>
                            <span id="prev-text">Previous</span>
                        </button>
                        <button class="btn btn-primary text-white font-medium" onclick="nextStep()" id="next-btn">
                            <span id="next-text">Next</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Details -->
                <div class="form-step" id="step2">
                    <div class="section-title" id="details-title">Provide Details</div>
                    
                    <div class="form-group">
                        <label class="form-label" id="incident-date-label">When did this incident occur?</label>
                        <input type="date" class="form-input" id="incident-date" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="incident-time-label">Approximate time (if known)</label>
                        <input type="time" class="form-input" id="incident-time">
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="location-label">Where did this occur?</label>
                        <select class="form-input form-select" id="location" required>
                            <option value="" id="location-placeholder">Select location</option>
                            <option value="production-line" id="prod-line">Production Line</option>
                            <option value="break-room" id="break-room">Break Room</option>
                            <option value="office" id="office">Office</option>
                            <option value="warehouse" id="warehouse">Warehouse</option>
                            <option value="parking" id="parking">Parking Area</option>
                            <option value="other" id="other-location">Other</option>
                        </select>
                    </div>

                    <div class="form-group" id="other-location-group" style="display: none;">
                        <label class="form-label" id="other-location-label">Please specify location</label>
                        <input type="text" class="form-input" id="other-location-input" placeholder="Enter specific location">
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="description-label">Describe what happened</label>
                        <textarea class="form-input form-textarea" id="description" 
                                placeholder="Please provide a detailed description of the incident..." required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="witnesses-label">Were there any witnesses?</label>
                        <div class="form-radio">
                            <input type="radio" id="witnesses-yes" name="witnesses" value="yes">
                            <label for="witnesses-yes" id="witnesses-yes-label">Yes</label>
                        </div>
                        <div class="form-radio">
                            <input type="radio" id="witnesses-no" name="witnesses" value="no">
                            <label for="witnesses-no" id="witnesses-no-label">No</label>
                        </div>
                        <div class="form-radio">
                            <input type="radio" id="witnesses-unsure" name="witnesses" value="unsure">
                            <label for="witnesses-unsure" id="witnesses-unsure-label">Not sure</label>
                        </div>
                    </div>

                    <div class="form-group" id="witness-details-group" style="display: none;">
                        <label class="form-label" id="witness-details-label">Witness details (optional)</label>
                        <textarea class="form-input form-textarea" id="witness-details" 
                                placeholder="Describe what witnesses saw or heard..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="impact-label">How has this affected you?</label>
                        <textarea class="form-input form-textarea" id="impact" 
                                placeholder="Describe the impact on your work, health, or well-being..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="previous-reports-label">Have you reported this before?</label>
                        <div class="form-radio">
                            <input type="radio" id="reported-yes" name="previous-reports" value="yes">
                            <label for="reported-yes" id="reported-yes-label">Yes</label>
                        </div>
                        <div class="form-radio">
                            <input type="radio" id="reported-no" name="previous-reports" value="no">
                            <label for="reported-no" id="reported-no-label">No</label>
                        </div>
                    </div>

                    <div class="form-group" id="previous-reports-details-group" style="display: none;">
                        <label class="form-label" id="previous-reports-details-label">What happened with previous reports?</label>
                        <textarea class="form-input form-textarea" id="previous-reports-details" 
                                placeholder="Describe what happened when you reported this before..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary font-medium" onclick="previousStep()">
                            <i class="fas fa-arrow-left"></i>
                            <span id="prev-text-2">Previous</span>
                        </button>
                        <button class="btn btn-primary text-white font-medium" onclick="nextStep()">
                            <span id="next-text-2">Next</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Evidence -->
                <div class="form-step" id="step3">
                    <div class="section-title" id="evidence-title">Upload Evidence (Optional)</div>
                    <p id="evidence-description">You can upload photos, documents, or other evidence to support your grievance. This is completely optional.</p>
                    
                    <div class="file-upload-area" id="file-upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text" id="upload-text">
                            Drag and drop files here, or click to browse
                        </div>
                        <input type="file" id="file-input" multiple accept="image/*,.pdf,.doc,.docx" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('file-input').click()">
                            <i class="fas fa-folder-open"></i>
                            <span id="browse-text">Browse Files</span>
                        </button>
                    </div>

                    <div class="uploaded-files" id="uploaded-files"></div>

                    <div class="form-group">
                        <label class="form-label" id="additional-info-label">Additional Information</label>
                        <textarea class="form-input form-textarea" id="additional-info" 
                                placeholder="Any additional information you'd like to provide..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary font-medium" onclick="previousStep()">
                            <i class="fas fa-arrow-left"></i>
                            <span id="prev-text-3">Previous</span>
                        </button>
                        <button class="btn btn-primary text-white font-medium" onclick="nextStep()">
                            <span id="next-text-3">Next</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 4: Review & Submit -->
                <div class="form-step" id="step4">
                    <div class="section-title" id="review-title">Review & Submit</div>
                    <p id="review-description">Please review your grievance before submitting. You can go back to make changes if needed.</p>
                    
                    <div class="form-group">
                        <label class="form-label" id="review-category-label">Category</label>
                        <div id="review-category" class="form-input" style="background: #f8f9fa; color: #333;"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="review-severity-label">Severity</label>
                        <div id="review-severity" class="form-input" style="background: #f8f9fa; color: #333;"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="review-description-label">Description</label>
                        <div id="review-description-text" class="form-input" style="background: #f8f9fa; color: #333; min-height: 80px;"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" id="review-files-label">Files Uploaded</label>
                        <div id="review-files" class="form-input" style="background: #f8f9fa; color: #333;"></div>
                    </div>

                    <div class="form-group">
                        <div class="form-checkbox">
                            <input type="checkbox" id="confirm-anonymous" required>
                            <label for="confirm-anonymous" id="confirm-anonymous-label">
                                I understand that this grievance will be submitted anonymously and my identity will be protected
                            </label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="confirm-accurate" required>
                            <label for="confirm-accurate" id="confirm-accurate-label">
                                I confirm that the information provided is accurate to the best of my knowledge
                            </label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="confirm-consent" required>
                            <label for="confirm-consent" id="confirm-consent-label">
                                I consent to this grievance being investigated and processed according to company policies
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary font-medium" onclick="previousStep()">
                            <i class="fas fa-arrow-left"></i>
                            <span id="prev-text-4">Previous</span>
                        </button>
                        <button class="btn btn-primary text-white font-medium" onclick="submitGrievance()" id="submit-btn">
                            <i class="fas fa-paper-plane"></i>
                            <span id="submit-text">Submit Grievance</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
    <script src="../assets/js/firebase-config.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
    <script src="../assets/js/worker-portal/grievance-form.js"></script>
    <script src="../../assets/js/universal-navigation.js"></script>
</body>
</html>


